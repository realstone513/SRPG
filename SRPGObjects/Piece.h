#pragma once
#include "../SFML_Framework/GameObject/SpriteObj.h"

enum class PieceTypes
{
	None = -1,
	Playable,
	AI,
};

// 공통적으로 쓸 것들 추가
class Piece : public SpriteObj
{
protected:
	// tile map info
	PieceTypes pType;
	Vector2i curIdx;
	Vector2f dest;
	Vector2f dir;
	float dist;
	float speed;

	// turn
	bool isTurn;		// 턴
	bool isPlayable;	// 조작
	bool done;			// 행동

public:
	// status
	int MaxHealth;
	int health;
	int damage;
	int armor;
	int range;
	bool rangeFill;
	int mobility;
	bool isDeath;

	Piece(PieceTypes pt, int h, int d, int a, int r, int m, bool f = true);
	virtual ~Piece() {};

	virtual void Reset();
	virtual void Update(float dt) override;
	virtual void SetPos(const Vector2f& pos) override;
	void SetIdxPos(const Vector2i& pos);
	const Vector2i& GetIdxPos() const;

	string GetStatusString() const;

	void SetIsTurn(bool isTurn);
	bool GetIsTurn();
	void SetDone(bool done);
	bool GetDone();
	void SetDest(Vector2f dest);
	Vector2f GetDest();

	// 행동이 끝나면 회색으로
	//void InactiveFillColor(bool condition);
};